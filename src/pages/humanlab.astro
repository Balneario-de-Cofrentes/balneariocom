---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { parseContent, renderCleanedMarkdown } from '@/lib/markdown';

const pages = await getCollection('pages');
const page = pages.find(p => p.data.slug === 'humanlab');
const parsed = page ? parseContent(page.body || '') : null;
const html = parsed ? renderCleanedMarkdown(parsed.body) : '';
---

<BaseLayout title="HumanLab" description="HumanLab at Cofrentes: laboratorio de investigacion en longevidad y salud.">
  <section class="bg-cream py-16 lg:py-24">
    <div class="mx-auto max-w-4xl px-6 lg:px-10">
      <span class="mb-4 inline-block text-[11px] font-body font-semibold uppercase tracking-[0.2em] text-navy-light">
        Investigacion y Ciencia
      </span>
      <h1 class="font-display text-4xl lg:text-5xl text-charcoal mb-8">HumanLab</h1>
      <div class="prose prose-lg max-w-none font-body" data-reveal set:html={html} />
    </div>
  </section>
</BaseLayout>
